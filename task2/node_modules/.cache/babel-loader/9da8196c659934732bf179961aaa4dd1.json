{"ast":null,"code":"import _classCallCheck from \"/Users/yukoenqvist/personaltrainer/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yukoenqvist/personaltrainer/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yukoenqvist/personaltrainer/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yukoenqvist/personaltrainer/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yukoenqvist/personaltrainer/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yukoenqvist/personaltrainer/src/Agenda.js\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from 'dom-helpers/class';\nimport getWidth from 'dom-helpers/query/width';\nimport scrollbarSize from 'dom-helpers/util/scrollbarSize';\nimport localizer from './localizer';\nimport message from './utils/messages';\nimport dates from './utils/dates';\nimport { navigate } from './utils/constants';\nimport { accessor as get } from './utils/accessors';\nimport { accessor, dateFormat, dateRangeFormat } from './utils/propTypes';\nimport { inRange } from './utils/eventLevels';\nimport { isSelected } from './utils/selection';\n\nvar Agenda =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Agenda, _React$Component);\n\n  function Agenda() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Agenda);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Agenda)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderDay = function (day, events, dayKey) {\n      var _this$props = _this.props,\n          culture = _this$props.culture,\n          components = _this$props.components,\n          titleAccessor = _this$props.titleAccessor,\n          agendaDateFormat = _this$props.agendaDateFormat,\n          eventPropGetter = _this$props.eventPropGetter,\n          startAccessor = _this$props.startAccessor,\n          endAccessor = _this$props.endAccessor,\n          selected = _this$props.selected;\n      var EventComponent = components.event;\n      var DateComponent = components.date;\n      events = events.filter(function (e) {\n        return inRange(e, day, day, _this.props);\n      });\n      return events.map(function (event, idx) {\n        var _ref = eventPropGetter ? eventPropGetter(event, get(event, startAccessor), get(event, endAccessor), isSelected(event, selected)) : {},\n            className = _ref.className,\n            style = _ref.style;\n\n        var dateLabel = idx === 0 && localizer.format(day, agendaDateFormat, culture);\n        var first = idx === 0 ? React.createElement(\"td\", {\n          rowSpan: events.length,\n          className: \"rbc-agenda-date-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, DateComponent ? React.createElement(DateComponent, {\n          day: day,\n          label: dateLabel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }) : dateLabel) : false;\n        var title = get(event, titleAccessor);\n        return React.createElement(\"tr\", {\n          key: dayKey + '_' + idx,\n          className: className,\n          style: style,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, first, React.createElement(\"td\", {\n          className: \"rbc-agenda-time-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, _this.timeRangeLabel(day, event)), React.createElement(\"td\", {\n          className: \"rbc-agenda-event-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, EventComponent ? React.createElement(EventComponent, {\n          event: event,\n          title: title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }) : title));\n      }, []);\n    };\n\n    _this.timeRangeLabel = function (day, event) {\n      var _this$props2 = _this.props,\n          endAccessor = _this$props2.endAccessor,\n          startAccessor = _this$props2.startAccessor,\n          allDayAccessor = _this$props2.allDayAccessor,\n          culture = _this$props2.culture,\n          messages = _this$props2.messages,\n          components = _this$props2.components;\n      var labelClass = '',\n          TimeComponent = components.time,\n          label = message(messages).allDay;\n      var start = get(event, startAccessor);\n      var end = get(event, endAccessor);\n\n      if (!get(event, allDayAccessor)) {\n        if (dates.eq(start, end, 'day')) {\n          label = localizer.format({\n            start: start,\n            end: end\n          }, _this.props.agendaTimeRangeFormat, culture);\n        } else if (dates.eq(day, start, 'day')) {\n          label = localizer.format(start, _this.props.agendaTimeFormat, culture);\n        } else if (dates.eq(day, end, 'day')) {\n          label = localizer.format(end, _this.props.agendaTimeFormat, culture);\n        }\n      }\n\n      if (dates.gt(day, start, 'day')) labelClass = 'rbc-continues-prior';\n      if (dates.lt(day, end, 'day')) labelClass += ' rbc-continues-after';\n      return React.createElement(\"span\", {\n        className: labelClass.trim(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, TimeComponent ? React.createElement(TimeComponent, {\n        event: event,\n        day: day,\n        label: label,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }) : label);\n    };\n\n    _this._adjustHeader = function () {\n      var header = _this.refs.header;\n      var firstRow = _this.refs.tbody.firstChild;\n      if (!firstRow) return;\n      var isOverflowing = _this.refs.content.scrollHeight > _this.refs.content.clientHeight;\n      var widths = _this._widths || [];\n      _this._widths = [getWidth(firstRow.children[0]), getWidth(firstRow.children[1])];\n\n      if (widths[0] !== _this._widths[0] || widths[1] !== _this._widths[1]) {\n        _this.refs.dateCol.style.width = _this._widths[0] + 'px';\n        _this.refs.timeCol.style.width = _this._widths[1] + 'px';\n      }\n\n      if (isOverflowing) {\n        classes.addClass(header, 'rbc-header-overflowing');\n        header.style.marginRight = scrollbarSize() + 'px';\n      } else {\n        classes.removeClass(header, 'rbc-header-overflowing');\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Agenda, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._adjustHeader();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this._adjustHeader();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          length = _this$props3.length,\n          date = _this$props3.date,\n          events = _this$props3.events,\n          startAccessor = _this$props3.startAccessor;\n      var messages = message(this.props.messages);\n      var end = dates.add(date, length, 'day');\n      var range = dates.range(date, end, 'day');\n      events = events.filter(function (event) {\n        return inRange(event, date, end, _this2.props);\n      });\n      events.sort(function (a, b) {\n        return +get(a, startAccessor) - +get(b, startAccessor);\n      });\n      return React.createElement(\"div\", {\n        className: \"rbc-agenda-view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        ref: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"rbc-header\",\n        ref: \"dateCol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, messages.date), React.createElement(\"th\", {\n        className: \"rbc-header\",\n        ref: \"timeCol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, messages.time), React.createElement(\"th\", {\n        className: \"rbc-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, messages.event)))), React.createElement(\"div\", {\n        className: \"rbc-agenda-content\",\n        ref: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        ref: \"tbody\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, range.map(function (day, idx) {\n        return _this2.renderDay(day, events, idx);\n      })))));\n    }\n  }]);\n\n  return Agenda;\n}(React.Component);\n\nAgenda.propTypes = {\n  events: PropTypes.array,\n  date: PropTypes.instanceOf(Date),\n  length: PropTypes.number.isRequired,\n  titleAccessor: accessor.isRequired,\n  allDayAccessor: accessor.isRequired,\n  startAccessor: accessor.isRequired,\n  endAccessor: accessor.isRequired,\n  eventPropGetter: PropTypes.func,\n  selected: PropTypes.object,\n  agendaDateFormat: dateFormat,\n  agendaTimeFormat: dateFormat,\n  agendaTimeRangeFormat: dateRangeFormat,\n  culture: PropTypes.string,\n  components: PropTypes.object.isRequired,\n  messages: PropTypes.shape({\n    date: PropTypes.string,\n    time: PropTypes.string\n  })\n};\nAgenda.defaultProps = {\n  length: 30\n};\n\nAgenda.navigate = function (date, action, _ref2) {\n  var _ref2$length = _ref2.length,\n      length = _ref2$length === void 0 ? Agenda.defaultProps.length : _ref2$length;\n\n  switch (action) {\n    case navigate.PREVIOUS:\n      return dates.add(date, -length, 'day');\n\n    case navigate.NEXT:\n      return dates.add(date, length, 'day');\n\n    default:\n      return date;\n  }\n};\n\nAgenda.title = function (start, _ref3) {\n  var _ref3$length = _ref3.length,\n      length = _ref3$length === void 0 ? length = Agenda.defaultProps.length : _ref3$length,\n      formats = _ref3.formats,\n      culture = _ref3.culture;\n  var end = dates.add(start, length, 'day');\n  return localizer.format({\n    start: start,\n    end: end\n  }, formats.agendaHeaderFormat, culture);\n};\n\nexport default Agenda;","map":{"version":3,"sources":["/Users/yukoenqvist/personaltrainer/src/Agenda.js"],"names":["PropTypes","React","classes","getWidth","scrollbarSize","localizer","message","dates","navigate","accessor","get","dateFormat","dateRangeFormat","inRange","isSelected","Agenda","renderDay","day","events","dayKey","props","culture","components","titleAccessor","agendaDateFormat","eventPropGetter","startAccessor","endAccessor","selected","EventComponent","event","DateComponent","date","filter","e","map","idx","className","style","dateLabel","format","first","length","title","timeRangeLabel","allDayAccessor","messages","labelClass","TimeComponent","time","label","allDay","start","end","eq","agendaTimeRangeFormat","agendaTimeFormat","gt","lt","trim","_adjustHeader","header","refs","firstRow","tbody","firstChild","isOverflowing","content","scrollHeight","clientHeight","widths","_widths","children","dateCol","width","timeCol","addClass","marginRight","removeClass","add","range","sort","a","b","Component","propTypes","array","instanceOf","Date","number","isRequired","func","object","string","shape","defaultProps","action","PREVIOUS","NEXT","formats","agendaHeaderFormat"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from 'dom-helpers/class';\nimport getWidth from 'dom-helpers/query/width';\nimport scrollbarSize from 'dom-helpers/util/scrollbarSize';\n\nimport localizer from './localizer'\nimport message from './utils/messages';\nimport dates from './utils/dates';\nimport { navigate } from './utils/constants';\nimport { accessor as get } from './utils/accessors';\nimport { accessor, dateFormat, dateRangeFormat } from './utils/propTypes';\nimport { inRange } from './utils/eventLevels';\nimport { isSelected } from './utils/selection';\n\n\nclass Agenda extends React.Component {\n  static propTypes = {\n    events: PropTypes.array,\n    date: PropTypes.instanceOf(Date),\n    length: PropTypes.number.isRequired,\n    titleAccessor: accessor.isRequired,\n    allDayAccessor: accessor.isRequired,\n    startAccessor: accessor.isRequired,\n    endAccessor: accessor.isRequired,\n    eventPropGetter: PropTypes.func,\n    selected: PropTypes.object,\n\n    agendaDateFormat: dateFormat,\n    agendaTimeFormat: dateFormat,\n    agendaTimeRangeFormat: dateRangeFormat,\n    culture: PropTypes.string,\n\n    components: PropTypes.object.isRequired,\n    messages: PropTypes.shape({\n      date: PropTypes.string,\n      time: PropTypes.string,\n    })\n  };\n\n  static defaultProps = {\n    length: 30\n  };\n\n  componentDidMount() {\n    this._adjustHeader();\n  }\n\n  componentDidUpdate() {\n    this._adjustHeader();\n  }\n\n  render() {\n    let { length, date, events, startAccessor } = this.props;\n    let messages = message(this.props.messages);\n    let end = dates.add(date, length, 'day');\n\n    let range = dates.range(date, end, 'day');\n\n    events = events.filter(event =>\n      inRange(event, date, end, this.props)\n    );\n\n    events.sort((a, b) => +get(a, startAccessor) - +get(b, startAccessor));\n\n    return (\n      <div className='rbc-agenda-view'>\n        <table ref='header'>\n          <thead>\n            <tr>\n              <th className='rbc-header' ref='dateCol'>\n                {messages.date}\n              </th>\n              <th className='rbc-header' ref='timeCol'>\n                {messages.time}\n              </th>\n              <th className='rbc-header'>\n                {messages.event}\n              </th>\n            </tr>\n          </thead>\n        </table>\n        <div className='rbc-agenda-content' ref='content'>\n          <table>\n            <tbody ref='tbody'>\n              { range.map((day, idx) => this.renderDay(day, events, idx)) }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n\n  renderDay = (day, events, dayKey) => {\n    let {\n        culture, components\n      , titleAccessor, agendaDateFormat\n      , eventPropGetter, startAccessor, endAccessor, selected } = this.props;\n\n    let EventComponent = components.event;\n    let DateComponent = components.date;\n\n    events = events.filter(e => inRange(e, day, day, this.props));\n\n    return events.map((event, idx) => {\n      const { className, style } = eventPropGetter ?\n        eventPropGetter(\n          event,\n          get(event, startAccessor),\n          get(event, endAccessor),\n          isSelected(event, selected),\n        ) : {};\n      let dateLabel = idx === 0 && localizer.format(day, agendaDateFormat, culture);\n      let first = idx === 0\n          ? (\n            <td rowSpan={events.length} className='rbc-agenda-date-cell'>\n              { DateComponent\n                ? <DateComponent day={day} label={dateLabel}/>\n                : dateLabel\n              }\n            </td>\n          ) : false;\n\n      let title = get(event, titleAccessor);\n\n      return (\n        <tr key={dayKey + '_' + idx} className={className} style={style}>\n          {first}\n          <td className='rbc-agenda-time-cell'>\n            { this.timeRangeLabel(day, event) }\n          </td>\n          <td className='rbc-agenda-event-cell'>\n            { EventComponent\n                ? <EventComponent event={event} title={title}/>\n                : title\n            }\n          </td>\n        </tr>\n      );\n    }, []);\n  };\n\n  timeRangeLabel = (day, event) => {\n    let {\n        endAccessor, startAccessor, allDayAccessor\n      , culture, messages, components } = this.props;\n\n    let labelClass = ''\n      , TimeComponent = components.time\n      , label = message(messages).allDay;\n\n    let start = get(event, startAccessor);\n    let end = get(event, endAccessor);\n\n    if (!get(event, allDayAccessor)) {\n      if (dates.eq(start, end, 'day')){\n        label = localizer.format({ start, end }, this.props.agendaTimeRangeFormat, culture);\n      }\n      else if (dates.eq(day, start, 'day')){\n        label = localizer.format(start, this.props.agendaTimeFormat, culture);\n      }\n      else if (dates.eq(day, end, 'day')){\n        label = localizer.format(end, this.props.agendaTimeFormat, culture);\n      }\n    }\n\n    if (dates.gt(day, start, 'day')) labelClass = 'rbc-continues-prior';\n    if (dates.lt(day, end, 'day'))   labelClass += ' rbc-continues-after';\n\n    return (\n      <span className={labelClass.trim()}>\n        { TimeComponent\n          ? <TimeComponent event={event} day={day} label={label}/>\n          : label\n        }\n      </span>\n    );\n  };\n\n  _adjustHeader = () => {\n    let header = this.refs.header;\n    let firstRow = this.refs.tbody.firstChild;\n\n    if (!firstRow)\n      return;\n\n    let isOverflowing = this.refs.content.scrollHeight > this.refs.content.clientHeight;\n    let widths = this._widths || [];\n\n    this._widths = [\n      getWidth(firstRow.children[0]),\n      getWidth(firstRow.children[1])\n    ];\n\n    if (widths[0] !== this._widths[0] || widths[1] !== this._widths[1]) {\n      this.refs.dateCol.style.width = this._widths[0] + 'px';\n      this.refs.timeCol.style.width = this._widths[1] + 'px';\n    }\n\n    if (isOverflowing) {\n      classes.addClass(header, 'rbc-header-overflowing');\n      header.style.marginRight = scrollbarSize() + 'px';\n    }\n    else {\n      classes.removeClass(header, 'rbc-header-overflowing');\n    }\n  };\n}\n\nAgenda.navigate = (date, action, { length = Agenda.defaultProps.length }) => {\n  switch (action){\n    case navigate.PREVIOUS:\n      return dates.add(date, -length, 'day');\n\n    case navigate.NEXT:\n      return dates.add(date, length, 'day');\n\n    default:\n      return date;\n  }\n};\n\nAgenda.title = (start, { length = length = Agenda.defaultProps.length, formats, culture }) => {\n  let end = dates.add(start, length, 'day');\n  return localizer.format(\n    { start, end },\n    formats.agendaHeaderFormat,\n    culture\n  );\n}\n\n\nexport default Agenda;\n"]},"metadata":{},"sourceType":"module"}